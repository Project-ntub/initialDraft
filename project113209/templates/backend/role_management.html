{% load static %}
<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>角色管理</title>
    <link
      rel="stylesheet"
      href="{% static 'backend/css/role_management.css' %}"
    />
  </head>
  <body>
    <div class="container">
      <div class="header">
        <button
          id="add-role-btn"
          class="btn"
          onclick="location.href='{% url 'backend:create_role' %}'"
        >
          新增角色
        </button>
        <label for="chart-module-select">圖表模組編輯:</label>
        <select id="chart-module-select">
          <option value="module1">模組1</option>
          <option value="module2">模組2</option>
          <option value="module3">模組3</option>
        </select>
      </div>
      <table class="role-table">
        <thead>
          <tr>
            <th>角色名稱</th>
            <th>角色狀態</th>
            <th>用戶數</th>
            <th>角色成員</th>
            <th>操作</th>
          </tr>
        </thead>
        <tbody>
          {% for role in roles %}
          <tr>
            <td>{{ role.name }}</td>
            <td><button class="status-btn">開啟</button></td>
            <td>{{ role.users.count }}</td>
            <td>
              <select>
                {% for user in role.users.all %}
                <option value="{{ user.id }}">{{ user.username }}</option>
                {% endfor %}
              </select>
            </td>
            <td>
              <button
                class="permissions-btn"
                onclick="location.href='{% url 'backend:edit_role' role.id %}'"
              >
                角色權限
              </button>
              <button
                class="delete-btn"
                onclick="location.href='{% url 'backend:delete_role' role.id %}'"
              >
                刪除
              </button>
            </td>
          </tr>
          {% endfor %}
        </tbody>
      </table>
    </div>
  </body>
</html>
